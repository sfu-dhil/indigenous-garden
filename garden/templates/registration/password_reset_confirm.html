{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}{% if form.email.errors %}{% translate "Error:" %} {% endif %}{{ block.super }}{% endblock %}
{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}">
    <style>
        .aligned label {
            width: auto !important;
        }
        ul {
            margin-left: 0 !important;
        }
    </style>
{% endblock %}


{% block breadcrumbs %}
    <div class="px-12">
        <div class="container mb-12 mx-auto -my-3">
            <ul class="flex">
                {% url 'admin:index' as link %}
                {% trans 'Home' as name %}
                {% include 'unfold/helpers/breadcrumb_item.html' with link=link name=name %}

                {% translate 'Password reset confirmation' as breadcrumb_name %}
                {% include 'unfold/helpers/breadcrumb_item.html' with link='' name=breadcrumb_name %}
            </ul>
        </div>
    </div>
{% endblock %}

{% block content %}

{% if validlink %}

    <p class="mb-3">{% translate 'Please enter your new password twice so we can verify you typed it in correctly.' %}</p>

    <form{% if form_url %} action="{{ form_url }}"{% endif %} method="post" id="{{ opts.model_name }}_form">{% csrf_token %}{% block form_top %}{% endblock %}
        <input class="hidden" autocomplete="username" value="{{ form.user.get_username }}">

        <div>
            <fieldset class="module">
                <div class="aligned border border-gray-200 mb-8 rounded-md p-3 shadow-sm dark:border-gray-800">

                    {% include "unfold/helpers/messages/errornote.html" with errors=form.errors %}

                    {% include "unfold/helpers/field.html" with field=form.new_password1 %}

                    {% include "unfold/helpers/field.html" with field=form.new_password2 %}

                    <button type="submit" class="bg-primary-600 border border-transparent font-medium px-3 py-2 rounded-md text-sm text-white">
                        {% translate 'Change my password' %}
                    </button>
                </div>
            </fieldset>
        </div>
    </form>
{% else %}
    <p>{% translate "The password reset link was invalid, possibly because it has already been used.  Please request a new password reset." %}</p>
{% endif %}

{% endblock %}
